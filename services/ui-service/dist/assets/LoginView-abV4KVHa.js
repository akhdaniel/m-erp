import{d as x,u as g,r as w,o as v,c as l,a as e,w as b,b as d,e as u,v as c,f as t,g as h,t as m,h as _,i,j as k,k as V}from"./index-Cr4MYUY-.js";import{r as L}from"./ExclamationTriangleIcon-Dajd-O-b.js";const S={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},C={class:"max-w-md w-full space-y-8"},M={class:"rounded-md shadow-sm space-y-4"},z={key:0,class:"rounded-md bg-red-50 p-4"},B={class:"flex"},N={class:"flex-shrink-0"},U={class:"ml-3"},j={class:"mt-2 text-sm text-red-700"},q=["disabled"],E={key:0,class:"absolute left-0 inset-y-0 flex items-center pl-3"},A=x({__name:"LoginView",setup(P){const p=k(),f=V(),r=g(),o=w({username:"",password:""});v(()=>{r.clearError()});async function y(){try{await r.login(o.value);const a=f.query.redirect||"/dashboard";p.push(a)}catch(a){console.error("Login error:",a)}}return(a,s)=>(i(),l("div",S,[e("div",C,[s[6]||(s[6]=e("div",null,[e("h1",{class:"text-center text-3xl font-bold text-gray-900"},"M-ERP"),e("h2",{class:"mt-6 text-center text-2xl font-medium text-gray-900"}," Sign in to your account ")],-1)),e("form",{class:"mt-8 space-y-6",onSubmit:b(y,["prevent"])},[e("div",M,[e("div",null,[s[2]||(s[2]=e("label",{for:"username",class:"sr-only"},"Username",-1)),u(e("input",{id:"username","onUpdate:modelValue":s[0]||(s[0]=n=>o.value.username=n),name:"username",type:"text",autocomplete:"username",required:"",class:"relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Username"},null,512),[[c,o.value.username]])]),e("div",null,[s[3]||(s[3]=e("label",{for:"password",class:"sr-only"},"Password",-1)),u(e("input",{id:"password","onUpdate:modelValue":s[1]||(s[1]=n=>o.value.password=n),name:"password",type:"password",autocomplete:"current-password",required:"",class:"relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Password"},null,512),[[c,o.value.password]])])]),t(r).error?(i(),l("div",z,[e("div",B,[e("div",N,[h(t(L),{class:"h-5 w-5 text-red-400"})]),e("div",U,[s[4]||(s[4]=e("h3",{class:"text-sm font-medium text-red-800"}," Login failed ",-1)),e("div",j,m(t(r).error),1)])])])):d("",!0),e("div",null,[e("button",{type:"submit",disabled:t(r).isLoading,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed"},[t(r).isLoading?(i(),l("span",E,s[5]||(s[5]=[e("svg",{class:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):d("",!0),_(" "+m(t(r).isLoading?"Signing in...":"Sign in"),1)],8,q)])],32)])]))}});export{A as default};
