import{d as B,r as F,p as I,o as L,l as j,m as f,i as r,a as e,c as d,g as p,h as u,f as a,t as l,n as E,e as _,v as U,q as h,b as x,F as C,s as S,x as w}from"./index-Cr4MYUY-.js";import{_ as q}from"./AppLayout.vue_vue_type_script_setup_true_lang-DU1WgjSg.js";import{u as G}from"./partners-851dXr1N.js";import{r as $}from"./UsersIcon-DKS4hlDt.js";import{r as P}from"./PlusIcon-DmciI6NM.js";import{r as W}from"./ExclamationTriangleIcon-Dajd-O-b.js";import{r as H,a as J}from"./ChevronRightIcon-tzXdTcQb.js";const K={class:"space-y-6"},O={class:"md:flex md:items-center md:justify-between"},Q={class:"flex-1 min-w-0"},R={class:"mt-1 flex flex-col sm:flex-row sm:flex-wrap sm:mt-0 sm:space-x-6"},X={class:"mt-2 flex items-center text-sm text-gray-500"},Y={class:"mt-4 flex md:mt-0 md:ml-4"},Z={class:"bg-white shadow rounded-lg"},ee={class:"px-4 py-5 sm:p-6"},te={class:"grid grid-cols-1 gap-6 sm:grid-cols-4"},se={class:"mt-1"},oe={class:"mt-1"},ae={class:"mt-1"},ie={class:"mt-1"},ne={key:0,class:"text-center py-12"},re={key:1,class:"rounded-md bg-red-50 p-4"},le={class:"flex"},de={class:"flex-shrink-0"},pe={class:"ml-3"},ce={class:"mt-2 text-sm text-red-700"},me={key:2,class:"card"},ue={class:"overflow-hidden"},xe={class:"min-w-full divide-y divide-gray-200"},ge={class:"bg-white divide-y divide-gray-200"},ye={class:"px-6 py-4 whitespace-nowrap"},ve={class:"text-sm font-medium text-gray-900"},fe={class:"text-sm text-gray-500"},_e={class:"px-6 py-4 whitespace-nowrap"},be={class:"flex flex-wrap gap-1"},he={key:0,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800"},we={key:1,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800"},ke={key:2,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800"},Ce={key:3,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"},Se={class:"px-6 py-4 whitespace-nowrap"},$e={class:"text-sm text-gray-900"},Pe={class:"text-sm text-gray-500"},ze={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ve={class:"px-6 py-4 whitespace-nowrap"},Ae={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Te={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"},De=["onClick"],Ne=["onClick"],Me={key:0,class:"text-center py-12"},Be={class:"mt-6"},Fe={key:0,class:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},Ie={class:"flex-1 flex justify-between sm:hidden"},Le=["disabled"],je=["disabled"],Ee={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Ue={class:"text-sm text-gray-700"},qe={class:"font-medium"},Ge={class:"font-medium"},We={class:"font-medium"},He={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},Je=["disabled"],Ke=["onClick"],Oe=["disabled"],ot=B({__name:"PartnerListView",setup(Qe){const o=G(),n=F({search:"",partner_type:"",is_active:"",size:10,page:1}),z=I(()=>{const i=o.pagination.page,t=o.pagination.pages,m=2,s=[],c=[];for(let v=Math.max(2,i-m);v<=Math.min(t-1,i+m);v++)s.push(v);return i-m>2?c.push(1,"..."):c.push(1),c.push(...s),i+m<t-1?c.push("...",t):c.push(t),c.filter((v,N,M)=>v!==M[N-1])});let k;const V=()=>{clearTimeout(k),k=setTimeout(()=>{y()},300)},b=()=>{n.value.page=1,y()},g=i=>{i>=1&&i<=o.pagination.pages&&(n.value.page=i,y())},y=async()=>{const i={page:n.value.page,size:n.value.size,search:n.value.search||void 0,partner_type:n.value.partner_type||void 0,is_active:n.value.is_active!==""?n.value.is_active:void 0};await o.fetchPartners(i)},A=async i=>{if(confirm(`Are you sure you want to ${i.is_active?"deactivate":"activate"} ${i.name}?`))try{await o.togglePartnerStatus(i.id,!i.is_active)}catch(t){console.error("Failed to toggle partner status:",t)}},T=async i=>{if(confirm(`Are you sure you want to delete ${i.name}? This action cannot be undone.`))try{await o.deletePartner(i.id)}catch(t){console.error("Failed to delete partner:",t)}},D=i=>new Date(i).toLocaleDateString();return L(()=>{o.clearError(),y()}),(i,t)=>{const m=E("router-link");return r(),j(q,null,{default:f(()=>[e("div",K,[e("div",O,[e("div",Q,[t[8]||(t[8]=e("h1",{class:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate"}," Partners ",-1)),e("div",R,[e("div",X,[p(a($),{class:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),u(" "+l(a(o).pagination.total)+" partners ",1)])])]),e("div",Y,[p(m,{to:"/partners/create",class:"btn btn-primary inline-flex items-center"},{default:f(()=>[p(a(P),{class:"-ml-1 mr-2 h-5 w-5"}),t[9]||(t[9]=u(" Add Partner ",-1))]),_:1,__:[9]})])]),e("div",Z,[e("div",ee,[e("div",te,[e("div",null,[t[10]||(t[10]=e("label",{for:"search",class:"block text-sm font-medium text-gray-700"}," Search ",-1)),e("div",se,[_(e("input",{id:"search","onUpdate:modelValue":t[0]||(t[0]=s=>n.value.search=s),type:"text",placeholder:"Search partners...",class:"input",onInput:V},null,544),[[U,n.value.search]])])]),e("div",null,[t[12]||(t[12]=e("label",{for:"partner-type",class:"block text-sm font-medium text-gray-700"}," Type ",-1)),e("div",oe,[_(e("select",{id:"partner-type","onUpdate:modelValue":t[1]||(t[1]=s=>n.value.partner_type=s),class:"input",onChange:b},t[11]||(t[11]=[e("option",{value:""},"All Types",-1),e("option",{value:"customer"},"Customers",-1),e("option",{value:"supplier"},"Suppliers",-1),e("option",{value:"vendor"},"Vendors",-1),e("option",{value:"both"},"Both Customer & Supplier",-1)]),544),[[h,n.value.partner_type]])])]),e("div",null,[t[14]||(t[14]=e("label",{for:"status",class:"block text-sm font-medium text-gray-700"}," Status ",-1)),e("div",ae,[_(e("select",{id:"status","onUpdate:modelValue":t[2]||(t[2]=s=>n.value.is_active=s),class:"input",onChange:b},t[13]||(t[13]=[e("option",{value:""},"All",-1),e("option",{value:!0},"Active",-1),e("option",{value:!1},"Inactive",-1)]),544),[[h,n.value.is_active]])])]),e("div",null,[t[16]||(t[16]=e("label",{for:"page-size",class:"block text-sm font-medium text-gray-700"}," Items per page ",-1)),e("div",ie,[_(e("select",{id:"page-size","onUpdate:modelValue":t[3]||(t[3]=s=>n.value.size=s),class:"input",onChange:b},t[15]||(t[15]=[e("option",{value:10},"10",-1),e("option",{value:25},"25",-1),e("option",{value:50},"50",-1)]),544),[[h,n.value.size]])])])])])]),a(o).isLoading?(r(),d("div",ne,t[17]||(t[17]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),e("p",{class:"mt-2 text-sm text-gray-500"},"Loading partners...",-1)]))):a(o).error?(r(),d("div",re,[e("div",le,[e("div",de,[p(a(W),{class:"h-5 w-5 text-red-400"})]),e("div",pe,[t[18]||(t[18]=e("h3",{class:"text-sm font-medium text-red-800"}," Error loading partners ",-1)),e("div",ce,l(a(o).error),1),e("div",{class:"mt-4"},[e("button",{onClick:y,class:"bg-red-100 px-3 py-2 rounded-md text-sm font-medium text-red-800 hover:bg-red-200"}," Try again ")])])])])):(r(),d("div",me,[e("div",ue,[e("table",xe,[t[20]||(t[20]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Partner "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Contact "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Industry "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Created "),e("th",{scope:"col",class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Actions")])])],-1)),e("tbody",ge,[(r(!0),d(C,null,S(a(o).partners||[],s=>(r(),d("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",ye,[e("div",null,[e("div",ve,l(s.name),1),e("div",fe,l(s.code||"No code"),1)])]),e("td",_e,[e("div",be,[s.is_customer?(r(),d("span",he," Customer ")):x("",!0),s.is_supplier?(r(),d("span",we," Supplier ")):x("",!0),s.is_vendor?(r(),d("span",ke," Vendor ")):x("",!0),s.is_company?(r(),d("span",Ce," Company ")):x("",!0)])]),e("td",Se,[e("div",$e,l(s.email||"-"),1),e("div",Pe,l(s.phone||s.mobile||"-"),1)]),e("td",ze,l(s.industry||"-"),1),e("td",Ve,[e("span",{class:w([s.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800","inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},l(s.is_active?"Active":"Inactive"),3)]),e("td",Ae,l(D(s.created_at)),1),e("td",Te,[p(m,{to:`/partners/${s.id}/edit`,class:"text-primary-600 hover:text-primary-900"},{default:f(()=>t[19]||(t[19]=[u(" Edit ",-1)])),_:2,__:[19]},1032,["to"]),e("button",{onClick:c=>A(s),class:w([s.is_active?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"])},l(s.is_active?"Deactivate":"Activate"),11,De),e("button",{onClick:c=>T(s),class:"text-red-600 hover:text-red-900"}," Delete ",8,Ne)])]))),128))])]),!a(o).partners||a(o).partners.length===0?(r(),d("div",Me,[p(a($),{class:"mx-auto h-12 w-12 text-gray-400"}),t[22]||(t[22]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No partners found",-1)),t[23]||(t[23]=e("p",{class:"mt-1 text-sm text-gray-500"}," Get started by creating a new partner. ",-1)),e("div",Be,[p(m,{to:"/partners/create",class:"btn btn-primary"},{default:f(()=>[p(a(P),{class:"-ml-1 mr-2 h-5 w-5"}),t[21]||(t[21]=u(" Add Partner ",-1))]),_:1,__:[21]})])])):x("",!0)]),a(o).pagination.pages>1?(r(),d("div",Fe,[e("div",Ie,[e("button",{onClick:t[4]||(t[4]=s=>g(a(o).pagination.page-1)),disabled:a(o).pagination.page<=1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,Le),e("button",{onClick:t[5]||(t[5]=s=>g(a(o).pagination.page+1)),disabled:a(o).pagination.page>=a(o).pagination.pages,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,je)]),e("div",Ee,[e("div",null,[e("p",Ue,[t[24]||(t[24]=u(" Showing ",-1)),e("span",qe,l((a(o).pagination.page-1)*a(o).pagination.size+1),1),t[25]||(t[25]=u(" to ",-1)),e("span",Ge,l(Math.min(a(o).pagination.page*a(o).pagination.size,a(o).pagination.total)),1),t[26]||(t[26]=u(" of ",-1)),e("span",We,l(a(o).pagination.total),1),t[27]||(t[27]=u(" results ",-1))])]),e("div",null,[e("nav",He,[e("button",{onClick:t[6]||(t[6]=s=>g(a(o).pagination.page-1)),disabled:a(o).pagination.page<=1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[p(a(H),{class:"h-5 w-5"})],8,Je),(r(!0),d(C,null,S(z.value,s=>(r(),d("button",{key:s,onClick:c=>g(s),class:w([s===a(o).pagination.page?"z-10 bg-primary-50 border-primary-500 text-primary-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50","relative inline-flex items-center px-4 py-2 border text-sm font-medium"])},l(s),11,Ke))),128)),e("button",{onClick:t[7]||(t[7]=s=>g(a(o).pagination.page+1)),disabled:a(o).pagination.page>=a(o).pagination.pages,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[p(a(J),{class:"h-5 w-5"})],8,Oe)])])])])):x("",!0)]))])]),_:1})}}});export{ot as default};
