import{_ as w}from"./AppLayout.vue_vue_type_script_setup_true_lang-DU1WgjSg.js";import{u as v}from"./users-DZcvAz3Q.js";import{r as _}from"./UsersIcon-DKS4hlDt.js";import{r as f}from"./PlusIcon-DmciI6NM.js";import{r as b}from"./ExclamationTriangleIcon-Dajd-O-b.js";import{d as k,o as U,l as C,m,i as d,a as t,c as l,g as n,h as x,f as r,t as o,n as $,b as A,F as L,s as N,x as u}from"./index-Cr4MYUY-.js";const P={class:"space-y-6"},S={class:"md:flex md:items-center md:justify-between"},V={class:"flex-1 min-w-0"},B={class:"mt-1 flex flex-col sm:flex-row sm:flex-wrap sm:mt-0 sm:space-x-6"},D={class:"mt-2 flex items-center text-sm text-gray-500"},E={class:"mt-4 flex md:mt-0 md:ml-4"},F={key:0,class:"text-center py-12"},R={key:1,class:"rounded-md bg-red-50 p-4"},j={class:"flex"},I={class:"flex-shrink-0"},T={class:"ml-3"},z={class:"mt-2 text-sm text-red-700"},G={key:2,class:"card"},M={class:"overflow-hidden"},q={class:"min-w-full divide-y divide-gray-200"},H={class:"bg-white divide-y divide-gray-200"},J={class:"px-6 py-4 whitespace-nowrap"},K={class:"flex items-center"},O={class:"h-10 w-10 flex-shrink-0"},Q={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},W={class:"text-sm font-medium text-primary-600"},X={class:"ml-4"},Y={class:"text-sm font-medium text-gray-900"},Z={class:"text-sm text-gray-500"},tt={class:"px-6 py-4 whitespace-nowrap"},st={class:"px-6 py-4 whitespace-nowrap"},et={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},rt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"},at=["onClick"],ot={key:0,class:"text-center py-12"},it={class:"mt-6"},_t=k({__name:"UserListView",setup(nt){const i=v();function y(a){var e,p;const s=((e=a.first_name)==null?void 0:e[0])||"",c=((p=a.last_name)==null?void 0:p[0])||"";return(s+c).toUpperCase()}function h(a){return new Date(a).toLocaleDateString()}async function g(a){if(confirm(`Reset password for ${a.first_name} ${a.last_name}?`))try{const s=await i.resetUserPassword(a.id);alert(`Password reset successful. Temporary password: ${s}`)}catch{alert("Failed to reset password")}}return U(async()=>{await i.fetchUsers()}),(a,s)=>{const c=$("router-link");return d(),C(w,null,{default:m(()=>[t("div",P,[t("div",S,[t("div",V,[s[0]||(s[0]=t("h1",{class:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate"}," Users ",-1)),t("div",B,[t("div",D,[n(r(_),{class:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),x(" "+o(r(i).pagination.total)+" users ",1)])])]),t("div",E,[n(c,{to:"/users/create",class:"btn btn-primary inline-flex items-center"},{default:m(()=>[n(r(f),{class:"-ml-1 mr-2 h-5 w-5"}),s[1]||(s[1]=x(" Add User ",-1))]),_:1,__:[1]})])]),r(i).isLoading?(d(),l("div",F,s[2]||(s[2]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),t("p",{class:"mt-2 text-sm text-gray-500"},"Loading users...",-1)]))):r(i).error?(d(),l("div",R,[t("div",j,[t("div",I,[n(r(b),{class:"h-5 w-5 text-red-400"})]),t("div",T,[s[3]||(s[3]=t("h3",{class:"text-sm font-medium text-red-800"},"Error loading users",-1)),t("div",z,o(r(i).error),1)])])])):(d(),l("div",G,[t("div",M,[t("table",q,[s[5]||(s[5]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Role "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Created "),t("th",{class:"relative px-6 py-3"},[t("span",{class:"sr-only"},"Actions")])])],-1)),t("tbody",H,[(d(!0),l(L,null,N(r(i).users,e=>(d(),l("tr",{key:e.id,class:"hover:bg-gray-50"},[t("td",J,[t("div",K,[t("div",O,[t("div",Q,[t("span",W,o(y(e)),1)])]),t("div",X,[t("div",Y,o(e.first_name)+" "+o(e.last_name),1),t("div",Z,o(e.email),1)])])]),t("td",tt,[t("span",{class:u([e.is_superuser?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800","inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},o(e.is_superuser?"Admin":"User"),3)]),t("td",st,[t("span",{class:u([e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800","inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},o(e.is_active?"Active":"Inactive"),3)]),t("td",et,o(h(e.created_at)),1),t("td",rt,[n(c,{to:`/users/${e.id}/edit`,class:"text-primary-600 hover:text-primary-900"},{default:m(()=>s[4]||(s[4]=[x(" Edit ",-1)])),_:2,__:[4]},1032,["to"]),t("button",{onClick:p=>g(e),class:"text-yellow-600 hover:text-yellow-900"}," Reset Password ",8,at)])]))),128))])]),r(i).users.length===0?(d(),l("div",ot,[n(r(_),{class:"mx-auto h-12 w-12 text-gray-400"}),s[7]||(s[7]=t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No users found",-1)),s[8]||(s[8]=t("p",{class:"mt-1 text-sm text-gray-500"},"Get started by creating a new user.",-1)),t("div",it,[n(c,{to:"/users/create",class:"btn btn-primary"},{default:m(()=>[n(r(f),{class:"-ml-1 mr-2 h-5 w-5"}),s[6]||(s[6]=x(" Add User ",-1))]),_:1,__:[6]})])])):A("",!0)])]))])]),_:1})}}});export{_t as default};
