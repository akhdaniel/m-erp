import{d as L,r as j,p as B,o as I,l as E,m as f,i as l,n as P,a as e,c as p,g as d,h as u,f as a,t as r,e as y,v as U,q as k,b as C,F as $,s as S,x as h}from"./index-Cr4MYUY-.js";import{_ as q}from"./AppLayout.vue_vue_type_script_setup_true_lang-DU1WgjSg.js";import{u as G}from"./companies-Bc3UktZV.js";import{r as z}from"./BuildingOfficeIcon-53JOep3g.js";import{r as A}from"./PlusIcon-DmciI6NM.js";import{r as O}from"./ExclamationTriangleIcon-Dajd-O-b.js";import{r as W,a as H}from"./ChevronRightIcon-tzXdTcQb.js";const J={class:"space-y-6"},K={class:"md:flex md:items-center md:justify-between"},Q={class:"flex-1 min-w-0"},R={class:"mt-1 flex flex-col sm:flex-row sm:flex-wrap sm:mt-0 sm:space-x-6"},X={class:"mt-2 flex items-center text-sm text-gray-500"},Y={class:"mt-4 flex md:mt-0 md:ml-4"},Z={class:"bg-white shadow rounded-lg"},ee={class:"px-4 py-5 sm:p-6"},te={class:"grid grid-cols-1 gap-6 sm:grid-cols-3"},se={class:"mt-1"},ae={class:"mt-1"},ie={class:"mt-1"},oe={key:0,class:"text-center py-12"},ne={key:1,class:"rounded-md bg-red-50 p-4"},re={class:"flex"},le={class:"flex-shrink-0"},de={class:"ml-3"},ce={class:"mt-2 text-sm text-red-700"},pe={key:2,class:"card"},me={class:"overflow-hidden"},ue={class:"min-w-full divide-y divide-gray-200"},xe={class:"bg-white divide-y divide-gray-200"},ge={class:"px-6 py-4 whitespace-nowrap"},ve={class:"text-sm font-medium text-gray-900"},fe={class:"text-sm text-gray-500"},ye={class:"px-6 py-4 whitespace-nowrap"},he={class:"text-sm text-gray-900"},be={class:"text-sm text-gray-500"},_e={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},we={class:"px-6 py-4 whitespace-nowrap"},ke={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ce={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"},$e=["onClick"],Se=["onClick"],ze={key:0,class:"text-center py-12"},Ae={class:"mt-6"},De={key:0,class:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},Ve={class:"flex-1 flex justify-between sm:hidden"},Te=["disabled"],Me=["disabled"],Ne={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Fe={class:"text-sm text-gray-700"},Le={class:"font-medium"},je={class:"font-medium"},Be={class:"font-medium"},Ie={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},Ee=["disabled"],Pe=["onClick"],Ue=["disabled"],Re=L({__name:"CompanyListView",setup(qe){const i=G(),n=j({search:"",is_active:"",size:10,page:1});let b;const D=B(()=>{const o=i.pagination.page,t=i.pagination.pages,m=2,s=[],c=[];for(let x=Math.max(2,o-m);x<=Math.min(t-1,o+m);x++)s.push(x);return o-m>2?c.push(1,"..."):c.push(1),c.push(...s),o+m<t-1?c.push("...",t):c.push(t),c.filter((x,w,F)=>F.indexOf(x)===w&&x!==1||w===0)});function V(){clearTimeout(b),b=setTimeout(()=>{g()},500)}function _(){n.value.page=1,g()}async function g(){const o={page:n.value.page,size:n.value.size};n.value.search&&(o.search=n.value.search),n.value.is_active!==""&&(o.is_active=n.value.is_active),await i.fetchCompanies(o)}function v(o){o>=1&&o<=i.pagination.pages&&(n.value.page=o,g())}async function T(o){if(confirm(`Are you sure you want to ${o.is_active?"deactivate":"activate"} ${o.name}?`))try{await i.toggleCompanyStatus(o.id,!o.is_active)}catch{alert("Failed to update company status")}}async function M(o){if(confirm(`Are you sure you want to delete ${o.name}? This action cannot be undone.`))try{await i.deleteCompany(o.id)}catch{alert("Failed to delete company")}}function N(o){return new Date(o).toLocaleDateString()}return I(()=>{g()}),(o,t)=>{const m=P("router-link");return l(),E(q,null,{default:f(()=>[e("div",J,[e("div",K,[e("div",Q,[t[7]||(t[7]=e("h1",{class:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate"}," Companies ",-1)),e("div",R,[e("div",X,[d(a(z),{class:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),u(" "+r(a(i).pagination.total)+" companies ",1)])])]),e("div",Y,[d(m,{to:"/companies/create",class:"btn btn-primary inline-flex items-center"},{default:f(()=>[d(a(A),{class:"-ml-1 mr-2 h-5 w-5"}),t[8]||(t[8]=u(" Add Company ",-1))]),_:1,__:[8]})])]),e("div",Z,[e("div",ee,[e("div",te,[e("div",null,[t[9]||(t[9]=e("label",{for:"search",class:"block text-sm font-medium text-gray-700"}," Search ",-1)),e("div",se,[y(e("input",{id:"search","onUpdate:modelValue":t[0]||(t[0]=s=>n.value.search=s),type:"text",placeholder:"Search companies...",class:"input",onInput:V},null,544),[[U,n.value.search]])])]),e("div",null,[t[11]||(t[11]=e("label",{for:"status",class:"block text-sm font-medium text-gray-700"}," Status ",-1)),e("div",ae,[y(e("select",{id:"status","onUpdate:modelValue":t[1]||(t[1]=s=>n.value.is_active=s),class:"input",onChange:_},t[10]||(t[10]=[e("option",{value:""},"All",-1),e("option",{value:!0},"Active",-1),e("option",{value:!1},"Inactive",-1)]),544),[[k,n.value.is_active]])])]),e("div",null,[t[13]||(t[13]=e("label",{for:"page-size",class:"block text-sm font-medium text-gray-700"}," Items per page ",-1)),e("div",ie,[y(e("select",{id:"page-size","onUpdate:modelValue":t[2]||(t[2]=s=>n.value.size=s),class:"input",onChange:_},t[12]||(t[12]=[e("option",{value:10},"10",-1),e("option",{value:25},"25",-1),e("option",{value:50},"50",-1)]),544),[[k,n.value.size]])])])])])]),a(i).isLoading?(l(),p("div",oe,t[14]||(t[14]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),e("p",{class:"mt-2 text-sm text-gray-500"},"Loading companies...",-1)]))):a(i).error?(l(),p("div",ne,[e("div",re,[e("div",le,[d(a(O),{class:"h-5 w-5 text-red-400"})]),e("div",de,[t[15]||(t[15]=e("h3",{class:"text-sm font-medium text-red-800"}," Error loading companies ",-1)),e("div",ce,r(a(i).error),1),e("div",{class:"mt-4"},[e("button",{onClick:g,class:"bg-red-100 px-3 py-2 rounded-md text-sm font-medium text-red-800 hover:bg-red-200"}," Try again ")])])])])):(l(),p("div",pe,[e("div",me,[e("table",ue,[t[17]||(t[17]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Company "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Contact "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Currency "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Created "),e("th",{scope:"col",class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Actions")])])],-1)),e("tbody",xe,[(l(!0),p($,null,S(a(i).companies||[],s=>(l(),p("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",ge,[e("div",null,[e("div",ve,r(s.name),1),e("div",fe,r(s.code),1)])]),e("td",ye,[e("div",he,r(s.email||"-"),1),e("div",be,r(s.phone||"-"),1)]),e("td",_e,r(s.currency),1),e("td",we,[e("span",{class:h([s.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800","inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},r(s.is_active?"Active":"Inactive"),3)]),e("td",ke,r(N(s.created_at)),1),e("td",Ce,[d(m,{to:`/companies/${s.id}/edit`,class:"text-primary-600 hover:text-primary-900"},{default:f(()=>t[16]||(t[16]=[u(" Edit ",-1)])),_:2,__:[16]},1032,["to"]),e("button",{onClick:c=>T(s),class:h([s.is_active?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"])},r(s.is_active?"Deactivate":"Activate"),11,$e),e("button",{onClick:c=>M(s),class:"text-red-600 hover:text-red-900"}," Delete ",8,Se)])]))),128))])]),!a(i).companies||a(i).companies.length===0?(l(),p("div",ze,[d(a(z),{class:"mx-auto h-12 w-12 text-gray-400"}),t[19]||(t[19]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No companies found",-1)),t[20]||(t[20]=e("p",{class:"mt-1 text-sm text-gray-500"}," Get started by creating a new company. ",-1)),e("div",Ae,[d(m,{to:"/companies/create",class:"btn btn-primary"},{default:f(()=>[d(a(A),{class:"-ml-1 mr-2 h-5 w-5"}),t[18]||(t[18]=u(" Add Company ",-1))]),_:1,__:[18]})])])):C("",!0)]),a(i).pagination.pages>1?(l(),p("div",De,[e("div",Ve,[e("button",{onClick:t[3]||(t[3]=s=>v(a(i).pagination.page-1)),disabled:a(i).pagination.page<=1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,Te),e("button",{onClick:t[4]||(t[4]=s=>v(a(i).pagination.page+1)),disabled:a(i).pagination.page>=a(i).pagination.pages,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,Me)]),e("div",Ne,[e("div",null,[e("p",Fe,[t[21]||(t[21]=u(" Showing ",-1)),e("span",Le,r((a(i).pagination.page-1)*a(i).pagination.size+1),1),t[22]||(t[22]=u(" to ",-1)),e("span",je,r(Math.min(a(i).pagination.page*a(i).pagination.size,a(i).pagination.total)),1),t[23]||(t[23]=u(" of ",-1)),e("span",Be,r(a(i).pagination.total),1),t[24]||(t[24]=u(" results ",-1))])]),e("div",null,[e("nav",Ie,[e("button",{onClick:t[5]||(t[5]=s=>v(a(i).pagination.page-1)),disabled:a(i).pagination.page<=1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[d(a(W),{class:"h-5 w-5"})],8,Ee),(l(!0),p($,null,S(D.value,s=>(l(),p("button",{key:s,onClick:c=>v(s),class:h([s===a(i).pagination.page?"z-10 bg-primary-50 border-primary-500 text-primary-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50","relative inline-flex items-center px-4 py-2 border text-sm font-medium"])},r(s),11,Pe))),128)),e("button",{onClick:t[6]||(t[6]=s=>v(a(i).pagination.page+1)),disabled:a(i).pagination.page>=a(i).pagination.pages,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[d(a(H),{class:"h-5 w-5"})],8,Ue)])])])])):C("",!0)]))])]),_:1})}}});export{Re as default};
